<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>REvision</title>
    
    <!-- GSAP Core + ScrollTrigger + ScrollSmoother -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="ScrollSmoother.min.js"></script>

    <!-- Import map for ES modules -->
    <script type="importmap">
    {
        "imports": {
            "three": "https://cdn.jsdelivr.net/npm/three@0.157.0/build/three.module.js",
            "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.157.0/examples/jsm/"
        }
    }
    </script>

    <style>
        @font-face {
            font-family: 'NeueHaasGrotesk';
            src: url('NeueHaasGrotDisp-55Roman-Trial.woff2') format('woff2'),
                 url('NeueHaasGrotDisp-55Roman-Trial.woff') format('woff');
            font-weight: normal;
            font-style: normal;
        }

        @font-face {
            font-family: 'NeueHaasGrotesk';
            src: url('NeueHaasGrotDisp-56Italic-Trial.woff2') format('woff2'),
                 url('NeueHaasGrotDisp-56Italic-Trial.woff') format('woff');
            font-weight: normal;
            font-style: italic;
        }

        @font-face {
            font-family: 'Canela';
            src: url('Canela-ThinItalic-Trial.woff2') format('woff2'),
                 url('Canela-ThinItalic-Trial.woff') format('woff');
            font-weight: 100;
            font-style: italic;
        }

        @font-face {
            font-family: 'Canela';
            src: url('Canela-Thin-Trial.woff2') format('woff2'),
                 url('Canela-Thin-Trial.woff') format('woff');
            font-weight: 100;
            font-style: normal;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* Add text selection styling */
        ::selection {
            background-color: black;
            color: white;
        }

        ::-moz-selection {
            background-color: black;
            color: white;
        }

        html, body {
            overflow-x: hidden;
        }

        body {
            font-family: 'NeueHaasGrotesk', sans-serif;
            position: relative;
        }

        .progress {
            position: fixed;
            top: 0;
            left: 0;
            height: 1px;
            width: 0;
            background: rgba(0, 0, 0, 0.2);
            z-index: 100;
        }

        /* New Navigation Styles - 페이지 전체 넓이 박스 스타일 (로고 포함) */
        .new-nav {
            position: fixed;
            top: 15px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 1000;
        }

        .nav-container {
            position: relative;
            background: rgba(255, 255, 255, 0.7); /* 흰색 배경에 80% 불투명도 */
            border: 1.5px solid black;
            border-radius: 3px;
            padding: 2px 16px; /* 좌우 패딩을 20px + 4px = 24px로 조정 */
            box-shadow: none;
            /* 페이지 패딩에 딱 맞는 전체 넓이 */
            width: calc(100vw - 50px); /* 양쪽 45px 패딩 제외 */
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .nav-indicator {
            display: none;
        }

        .nav-links {
            display: flex;
            gap: 15px;
            position: relative;
            z-index: 2;
        }

        .nav-links a {
            color: black;
            text-decoration: none;
            font-size: 22px;
            font-family: 'NeueHaasGrotesk', sans-serif;
            font-style: normal;
            padding: 0 4px;
            white-space: nowrap;
            transition: transform 0.08s ease;
            display: inline-block;
        }

        .nav-links a.active {
            transform: skewX(-8deg);
        }

        .logo-container {
            background: transparent;
            border-radius: 0;
            padding: 0;
            box-shadow: none;
            position: relative;
            z-index: 2;
        }

        .logo {
            font-size: 22px;
            color: black;
            font-family: 'NeueHaasGrotesk', sans-serif;
        }

        /* Section styles */
        .section {
            height: 100vh;
            width: 100vw;
            overflow: hidden;
            position: relative;
            background-color: white;
        }

        /* Hero section - 수정된 비디오 크기 */
        .hero-section {
            background-color: white;
            transform-origin: top;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .video-container-hero {
            width: calc(100vw); /* 페이지 패딩에 맞게 좌우 25px씩 제외 */
            height: calc(100vh); /* 위아래 70px씩 제외 */
            background-color: white;
            border: none;
            border-radius: 0;
            overflow: hidden;
            box-shadow: none;
            position: relative;
        }

        #intro-video {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 0;
        }

        /* Features section - GRID-ALIGNED LAYOUT */
        .features-section {
            background-color: white;
            position: relative;
            padding: 0;
        }

        .section2-layout {
            position: relative;
            width: 100%;
            height: 100%;
            display: grid;
            grid-template-columns: 1fr 420px 1fr;
            grid-template-rows: 1fr 1fr;
            align-items: center;
            justify-items: center;
        }

        /* Title section - left column, vertically centered */
        .title-section {
            grid-column: 1;
            grid-row: 1 / 3;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            width: 100%;
            height: 100%;
            padding-right: 40px;
        }

        .feature-title-large {
            font-family: 'Canela', serif;
            font-size: 105px;
            font-weight: 100;
            font-style: normal;
            color: black;
            text-align: center;
            line-height: 1;
            writing-mode: vertical-rl;
            text-orientation: mixed;
            transform: rotate(180deg);
        }

        /* Eye model container - center column */
        #eye-model-container {
            grid-column: 2;
            grid-row: 1 / 3;
            width: 420px;
            height: 600px;
            z-index: 50;
            pointer-events: auto;
            opacity: 1;
            cursor: grab;
            background-color: black;
            border-radius: 0;
            overflow: hidden;
            box-shadow: none;
        }

        #eye-model-container:active {
            cursor: grabbing;
        }

        #eye-model-container canvas {
            width: 100% !important;
            height: 100% !important;
            outline: none;
        }

        /* Features content container - positioned to match container height exactly */
        .features-content {
            grid-column: 3;
            grid-row: 1 / 3;
            display: block;
            position: relative;
            width: 100%;
            height: 600px; /* Match container height exactly */
            align-self: center; /* Center vertically to align with container */
        }

        .feature-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 600px; /* Match container height exactly */
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            padding-left: 40px; /* Equal spacing to title section padding-right */
        }

        .feature-number {
            font-family: 'NeueHaasGrotesk', sans-serif;
            font-size: 22px;
            font-weight: normal;
            color: black;
            margin: 0;
            align-self: flex-start;
        }

        .feature-text-content {
            font-family: 'NeueHaasGrotesk', sans-serif;
            font-size: 20px;
            font-weight: normal;
            color: black;
            line-height: 1.3;
            max-width: 370px;
            align-self: flex-start;
        }

        /* Remove unused styles */
        .feature-header {
            display: none;
        }

        .feature-line {
            display: none;
        }

        /* Other features remain hidden by default */
        #feature2, #feature3 {
            opacity: 0;
            visibility: hidden;
        }

        /* First feature is visible by default */
        #feature1 {
            opacity: 1;
            visibility: visible;
        }

        /* AR Features section - 기본은 원래 세로 레이아웃, 클릭시 그리드 */
        .ar-features-section {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background-color: white;
            position: relative;
            padding: 0 45px;
            overflow: visible;
            transition: all 0.6s ease; /* 높이 변화에 애니메이션 추가 */
        }

        /* 확장 시 섹션 높이 증가 - 반응형으로 */
        .ar-features-section.has-expanded {
            min-height: calc(100vh + 620px); /* 기본 높이 + 확장된 컨텐츠 높이 */
        }

        /* 기본 상태 - 원래 세로 레이아웃 */
        .ar-features {
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 0;
            position: relative;
            transition: all 0.6s ease;
        }

        /* Feature item container - 기본은 원래 스타일 */
        .feature-item-container {
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
        }

        /* Full width separator line - 기본 상태에서만 보임 */
        .feature-separator {
            width: 100% !important;
            height: 1.5px !important;
            background-color: black !important;
            margin: 0 !important;
            display: block !important;
            visibility: visible !important;
            opacity: 1 !important;
        }

        /* Feature item styling - 기본은 원래 스타일 */
        .feature-item {
            font-family: 'Canela', serif;
            font-weight: 100;
            font-style: normal;
            font-size: 105px;
            color: black;
            cursor: pointer;
            text-align: center;
            line-height: 1.12;
            margin: 0;
            padding: 30px 0;
            position: relative;
            z-index: 10;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 0;
            width: 100%;
            transition: padding-bottom 0.6s ease;
        }

        /* Feature content wrapper */
        .feature-content-wrapper {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0;
        }

        /* Feature number styling for AR features */
        .feature-number-ar {
            font-family: 'NeueHaasGrotesk', sans-serif;
            font-size: 22px;
            color: black;
            margin-left: auto;
        }

        /* Feature text parts */
        .feature-text-part {
            font-family: 'Canela', serif;
            font-weight: 100;
            font-style: normal;
            font-size: 105px;
            color: black;
            line-height: 1.12;
        }

        /* 확장된 콘텐츠 영역 - 텍스트와 구분선 사이에 삽입 */
        .expanded-content {
            position: relative;
            width: 100%;
            height: 0;
            background-color: white;
            overflow: hidden;
            transition: height 0.6s ease;
            margin: 0; /* 텍스트 바로 아래 */
        }

        .expanded-content-inner {
            width: 100%;
            height: 100%;
            display: grid;
            grid-template-columns: 1fr auto;
            gap: 40px;
            align-items: flex-start;
            justify-content: flex-start;
            padding: 40px 0;
            box-sizing: border-box;
        }

        /* 확장된 이미지/비디오 */
        .expanded-image {
            width: 1080px;
            height: 540px;
            object-fit: cover;
            opacity: 0;
            transform: translateX(100px);
            transition: all 0.6s ease;
            grid-column: 1;
        }

        /* 오른쪽 컨트롤 영역 */
        .expanded-controls {
            grid-column: 2;
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 20px;
            padding-top: 0; /* 사진 시작 높이에 맞춤 */
            opacity: 0;
            transform: translateX(50px);
            transition: all 0.6s ease;
            width: 380px;
        }

        .press-to-play {
            display: none; /* Experience 텍스트 숨김 */
        }

        .arrow-container {
            display: flex;
            align-items: center;
            margin: 0; /* 마진 제거 */
        }

        .arrow {
            width: 400px;
            height: 1.5px;
            background-color: black;
            position: relative;
        }

        .arrow::after {
            content: '';
            position: absolute;
            left: +2px; /* -10px에서 -7px로 조정하여 선 끝에 딱 붙임 */
            top: 50%;
            transform: translateY(-50%) rotate(45deg);
            width: 20px; /* 화살표 대가리 크기 */
            height: 20px;
            border-left: 1.5px solid black; /* 선과 같은 굵기 */
            border-bottom: 1.5px solid black; /* 선과 같은 굵기 */
            border-right: none;
            border-top: none;
        }

        .feature-description {
            font-family: 'NeueHaasGrotesk', sans-serif;
            padding-top: 20px;
            font-size: 24px; /* 18px에서 45px로 증가 (Experience와 같은 크기) */
            color: black;
            line-height: 1.3;
            text-align: left;
            width: 400px;
        }

        /* 확장된 상태 */
        .feature-item-container.expanded .expanded-content {
            height: 620px;
        }

        .feature-item-container.expanded .expanded-image {
            opacity: 1;
            transform: translateX(0);
        }

        .feature-item-container.expanded .expanded-controls {
            opacity: 1;
            transform: translateX(0);
        }

        /* Feature item에 확장 시 패딩 조정 */
        .feature-item-container.expanded .feature-item {
            padding-bottom: 0; /* 확장 시 아래 패딩 제거 */
        }

        /* 호버 미디어들을 동적으로 생성 - 모든 비디오 */
        .dynamic-hover-media {
            position: fixed;
            right: 150px;
            width: 450px;
            height: 300px;
            object-fit: cover;
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
            z-index: 1000;
            display: block;
        }

        /* Privacy section - 3-COLUMN GRID LAYOUT */
        .privacy-section {
            height: 100vh;
            display: flex;
            flex-direction: column;
            padding: 20px 45px 45px 45px;
            background-color: white;
            box-sizing: border-box;
        }

        .privacy-container {
            width: 100%;
            height: 100%;
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            grid-template-rows: 1fr auto;
            gap: 40px;
            align-items: start;
            padding-top: 20px;
        }

        .privacy-content {
            grid-column: 1 / 3;
            grid-row: 1;
            display: flex;
            align-items: flex-start;
            padding-top: 20px;
        }

        .privacy-content p {
            font-size: 48px;
            line-height: 1.2;
            font-family: 'Canela', serif;
            font-weight: 100;
            font-style: normal;
            margin: 0;
        }

        /* Video and text container layout - right column */
        .video-text-container {
            grid-column: 3;
            grid-row: 1;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: flex-start;
            gap: 20px;
            padding-top: 20px;
        }

        .video-container {
            width: 100%;
            max-width: 350px;
        }

        .video-container video {
            width: 100%;
            height: auto;
            display: block;
        }

        .text-container {
            width: 55%;
            max-width: 230px;
        }

        .text-container p {
            font-size: 22px;
            line-height: 1.3;
            margin: 0;
            text-align: left;
        }

        .privacy-footer {
            grid-column: 1 / 4;
            grid-row: 2;
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            width: 100%;
            padding: 20px 0 0 0;
            box-sizing: border-box;
            position: relative;
            z-index: 100;
        }

        .re-footer {
            font-family: 'Canela', serif;
            font-size: 105px;
            font-weight: 100;
            font-style: normal;
            line-height: 0.8;
            margin: 0;
        }

        .construct-footer {
            font-family: 'Canela', serif;
            font-size: 105px;
            font-weight: 100;
            font-style: normal;
            line-height: 0.8;
            margin: 0;
        }

        /* Connect section - 하단 여백 줄임 */
        .connect-section {
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            padding: 45px;
            background-color: white;
            position: relative;
        }

        .connect-text {
            font-family: 'Canela', serif;
            font-size: calc((100vw - 90px) / 3.2);
            font-weight: 100;
            font-style: normal;
            line-height: 0.85;
            letter-spacing: -0.04em;
            width: 100%;
            text-align: center;
            margin: 0;
            position: absolute;
            bottom: -30px; /* 마이너스 값으로 더 아래로 */
            left: 50%;
            transform: translateX(-52%);
            z-index: 1;
            overflow: hidden;
            padding-top: 50px;
            padding-bottom: 0;
        }

        .connect-text-inner {
            transform: translateY(100%);
        }

        .contact-form-container {
            width: calc(100% - 90px);
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 40px;
            align-items: start;
            position: absolute;
            top: 40%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 2;
        }

        .contact-form {
            grid-column: 2 / 4;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            align-items: start;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            font-family: 'NeueHaasGrotesk', sans-serif;
            font-size: 22px;
            font-weight: normal;
            color: black;
            margin-bottom: 10px;
        }

        .form-group input,
        .form-group select {
            font-family: 'NeueHaasGrotesk', sans-serif;
            font-size: 22px;
            padding: 0;
            border: none;
            border-bottom: 1.5px solid black;
            background: transparent;
            outline: none;
            color: black;
            padding-bottom: 8px;
        }

        .form-group select {
            font-family: 'NeueHaasGrotesk', sans-serif;
            font-size: 22px;
            padding: 0;
            border: none;
            border-bottom: 1.5px solid black;
            background: transparent;
            outline: none;
            color: #e6e6e6;
            padding-bottom: 8px;
        }

        .form-group select:focus,
        .form-group select:valid,
        .form-group select:not([value=""]) {
            color: black;
        }

        .form-group input::placeholder {
            color: #e6e6e6;
        }

        .form-group input:focus,
        .form-group select:focus {
            border-bottom: 1.5px solid black;
        }

        .form-group.full-width {
            grid-column: 1 / 3;
        }

        .form-group textarea {
            font-family: 'NeueHaasGrotesk', sans-serif;
            font-size: 22px;
            padding: 0;
            border: none;
            border-bottom: 1.5px solid black;
            background: transparent;
            outline: none;
            color: black;
            resize: none;
            min-height: 100px;
            padding-bottom: 8px;
        }

        .form-group textarea:focus {
            border-bottom: 1.5px solid black;
        }

        .submit-container {
            grid-column: 2;
            display: flex;
            justify-content: flex-end;
            align-items: flex-end;
            margin-top: 20px;
        }

        /* Submit 버튼 - 네비게이션과 같은 스타일 */
        .submit-btn {
            font-family: 'NeueHaasGrotesk', sans-serif;
            font-size: 22px;
            font-weight: normal;
            color: black;
            background: white;
            border: 1.5px solid black;
            border-radius: 3px;
            padding: 3.5px 10px;
            cursor: pointer;
            box-shadow: none;
        }

        .submit-btn span {
            display: inline-block;
            transition: transform 0.08s ease;
        }

        .submit-btn:hover span {
            transform: skewX(-8deg);
        }

        /* Mobile Responsive adjustments - 기존 미디어쿼리 확장 */
        @media (max-width: 1600px) {
            .feature-title-large {
                font-size: 75px;
            }
        }

        @media (max-width: 1400px) {
            .feature-title-large {
                font-size: 70px;
            }
        }

        @media (max-width: 1200px) {
            .new-nav {
                left: 50%;
                transform: translateX(-50%);
            }
            
            .nav-container {
                width: calc(100vw - 20px);
                padding: 2px 35px;
            }
            
            .hero-section {
                padding: 70px 10px;
            }
            
            .video-container-hero {
                width: calc(100vw - 20px);
                height: calc(100vh - 140px);
            }
            
            .section2-layout {
                grid-template-columns: 1fr;
                grid-template-rows: auto auto auto;
                gap: 20px;
                padding: 20px;
            }

            .title-section {
                grid-column: 1;
                grid-row: 1;
                padding: 20px 0;
            }

            .feature-title-large {
                font-size: 60px;
                writing-mode: horizontal-tb;
                text-orientation: mixed;
                transform: none;
            }
            
            #eye-model-container {
                grid-column: 1;
                grid-row: 2;
                height: 400px;
            }
            
            .features-content {
                grid-column: 1;
                grid-row: 3;
                padding: 20px 0;
            }

            .feature-container {
                position: relative;
                padding: 20px 0;
                height: auto;
            }
            
            .privacy-container {
                grid-template-columns: 1fr;
                grid-template-rows: auto auto auto auto;
                gap: 20px;
            }
            
            .privacy-content {
                grid-column: 1;
                grid-row: 1;
            }
            
            .video-text-container {
                grid-column: 1;
                grid-row: 2;
                flex-direction: column;
                align-items: center;
                width: 100%;
            }
            
            .video-container,
            .text-container {
                width: 100%;
                max-width: 300px;
            }
            
            .text-container {
                text-align: center;
                padding-top: 20px;
            }
            
            .privacy-footer {
                grid-column: 1;
                grid-row: 3;
            }
            
            .connect-text {
                font-size: calc((100vw - 90px) / 3.2);
            }
            
            .contact-form {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .form-group.full-width {
                grid-column: 1;
            }
            
            .submit-container {
                grid-column: 1;
                justify-content: center;
            }
            
            /* 모바일에서 확장 콘텐츠 조정 */
            .expanded-content-inner {
                grid-template-columns: 1fr;
                grid-template-rows: auto auto;
                gap: 20px;
                align-items: center;
            }
            
            .expanded-image {
                grid-column: 1;
                grid-row: 1;
                width: 100%;
                height: auto;
                max-width: 500px;
            }
            
            .expanded-controls {
                grid-column: 1;
                grid-row: 2;
                align-items: center;
                text-align: center;
            }
        }

        /* 추가 모바일 최적화 */
        @media (max-width: 768px) {
            .new-nav {
                top: 10px;
            }
            
            .nav-container {
                width: calc(100vw - 20px);
                padding: 2px 15px;
            }
            
            .nav-links {
                gap: 10px;
            }
            
            .nav-links a {
                font-size: 16px;
                padding: 0 2px;
            }
            
            .logo {
                font-size: 16px;
            }
            
            /* AR Features 모바일 최적화 */
            .ar-features-section {
                padding: 80px 20px 20px;
            }
            
            .feature-item {
                font-size: 48px;
                padding: 20px 0;
                flex-direction: column;
                gap: 10px;
            }
            
            .feature-text-part {
                font-size: 48px;
            }
            
            .feature-number-ar {
                margin-left: 0;
                font-size: 18px;
                align-self: center;
            }
            
            .feature-item-container.expanded .expanded-content {
                height: auto;
                min-height: 400px;
            }
            
            .expanded-content-inner {
                padding: 20px;
            }
            
            .arrow {
                width: 200px;
            }
            
            .feature-description {
                width: 100%;
                font-size: 16px;
                text-align: center;
            }
            
            /* 호버 미디어 모바일에서 숨기기 */
            .dynamic-hover-media {
                display: none !important;
            }
            
            /* Privacy section 모바일 */
            .privacy-content p {
                font-size: 32px;
            }
            
            .text-container p {
                font-size: 18px;
            }
            
            .re-footer,
            .construct-footer {
                font-size: 48px;
            }
            
            /* Contact section 모바일 */
            .connect-section {
                height: auto;
                min-height: 100vh;
                padding: 80px 20px 40px;
                justify-content: flex-start;
            }
            
            .connect-text {
                position: relative;
                bottom: auto;
                left: auto;
                transform: none;
                font-size: 48px;
                margin-bottom: 40px;
            }
            
            .connect-text-inner {
                transform: none;
            }
            
            .contact-form-container {
                position: relative;
                top: auto;
                left: auto;
                transform: none;
                width: 100%;
                grid-template-columns: 1fr;
            }
            
            .contact-form {
                grid-column: 1;
            }
            
            .form-group label,
            .form-group input,
            .form-group select,
            .form-group textarea {
                font-size: 18px;
            }
        }

        /* 더 작은 모바일 화면 */
        @media (max-width: 480px) {
            .nav-links a {
                font-size: 14px;
            }
            
            .logo {
                font-size: 14px;
            }
            
            .feature-title-large {
                font-size: 40px;
            }
            
            .feature-item {
                font-size: 36px;
            }
            
            .feature-text-part {
                font-size: 36px;
            }
            
            .privacy-content p {
                font-size: 24px;
            }
            
            .connect-text {
                font-size: 36px;
            }
            
            .re-footer,
            .construct-footer {
                font-size: 36px;
            }
        }

        /* Additional responsive fix for smaller screens - PRIVACY SECTION */
        @media (max-height: 900px) {
            .privacy-content p {
                font-size: 42px;
            }
        }

        @media (max-height: 800px) {
            .privacy-content p {
                font-size: 38px;
            }
            
            .re-footer,
            .construct-footer {
                font-size: clamp(30px, 3.5vw, 50px);
            }
        }

        @media (max-height: 700px) {
            .privacy-content p {
                font-size: 34px;
                line-height: 1.1;
            }
            
            .video-container {
                width: 300px;
            }
            
            .text-container {
                width: 200px;
            }
            
            .text-container p {
                font-size: 20px;
            }
            
            .re-footer,
            .construct-footer {
                font-size: clamp(25px, 3vw, 45px);
            }
        }
    </style>
</head>
<body>
    <div class="progress"></div>
    
    <!-- New Navigation -->
    <nav class="new-nav">
        <div class="nav-container">
            <div class="nav-indicator"></div>
            <div class="nav-links">
                <a href="#" data-section="1">Info</a>
                <a href="#" data-section="2">Features</a>
                <a href="#" data-section="3">Privacy</a>
                <a href="#" data-section="4">Contact</a>
            </div>
            <div class="logo">REvision®</div>
        </div>
    </nav>
    
    <!-- ScrollSmoother wrapper and content -->
    <div id="smooth-wrapper">
        <div id="smooth-content">
            
            <!-- Section 1: Hero/Intro -->
            <section class="section hero-section" id="section1">
                <div class="video-container-hero">
                    <video id="intro-video" autoplay muted loop playsinline>
                        <source src="intro.mp4" type="video/mp4">
                    </video>
                </div>
            </section>
            
            <!-- Section 2: Product Features - GRID-ALIGNED LAYOUT -->
            <section class="section features-section" id="section2">
                <div class="section2-layout">
                    <!-- Title section - left column, right-aligned -->
                    <div class="title-section">
                        <div class="feature-title-large" id="dynamic-title">REimagine</div>
                    </div>
                    
                    <!-- Black container with eye model - center column -->
                    <div id="eye-model-container">
                        <!-- THREE.js will render here -->
                    </div>
                    
                    <!-- Content container for features - right column -->
                    <div class="features-content">
                        <!-- Feature 1: reimagine -->
                        <div class="feature-container" id="feature1">
                            <div class="feature-number">01</div>
                            <div class="feature-text-content">
                                Step into a new era where sight extends beyond biology. REvision augments your natural vision with contextual intelligence and perfect recall, transforming how you interact with the world around you while feeling like a natural extension of your mind.
                            </div>
                        </div>
                        
                        <!-- Feature 2: reinvent -->
                        <div class="feature-container" id="feature2">
                            <div class="feature-number">02</div>
                            <div class="feature-text-content">
                                Break free from memory's limitations with a lens that captures everything your eyes touch. REvision creates a searchable library of your visual experience while maintaining the purity of natural sight, offering access to forgotten details through an interface so subtle it disappears into your perception.
                            </div>
                        </div>
                        
                        <!-- Feature 3: revision -->
                        <div class="feature-container" id="feature3">
                            <div class="feature-number">03</div>
                            <div class="feature-text-content">
                                Never lose another visual memory again. REvision's breakthrough technology doesn't just record what you see—it understands context, connections, and meaning behind every glance, making every moment permanently accessible yet personally private through humanity's first elegant solution to our inherently fallible memory.
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Section 3: AR Features - All videos -->
            <section class="section ar-features-section" id="section3">
                <div class="ar-features">
                    <div class="feature-item-container">
                        <div class="feature-separator"></div>
                        <div class="feature-item" data-feature="Name Recall">
                            <div class="feature-content-wrapper">
                                <span class="feature-text-part">Name Recall</span>
                            </div>
                            <span class="feature-number-ar">01</span>
                        </div>
                        <!-- 확장될 영역 - 비디오 -->
                        <div class="expanded-content">
                            <div class="expanded-content-inner">
                                <video class="expanded-image" autoplay muted loop playsinline>
                                    <source src="1.mp4" type="video/mp4">
                                </video>
                                <div class="expanded-controls">
                                    <div class="arrow-container">
                                        <div class="arrow"></div>
                                    </div>
                                    <p class="feature-description">Never forget a face again. Instantly recognize and displays names, context, and connection history for every person you meet, creating seamless social interactions.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="feature-item-container">
                        <div class="feature-separator"></div>
                        <div class="feature-item" data-feature="Augmented Navigation">
                            <div class="feature-content-wrapper">
                                <span class="feature-text-part">Augmented Navigation</span>
                            </div>
                            <span class="feature-number-ar">02</span>
                        </div>
                        <!-- 확장될 영역 - 비디오 -->
                        <div class="expanded-content">
                            <div class="expanded-content-inner">
                                <video class="expanded-image" autoplay muted loop playsinline>
                                    <source src="2.mp4" type="video/mp4">
                                </video>
                                <div class="expanded-controls">
                                    <div class="arrow-container">
                                        <div class="arrow"></div>
                                    </div>
                                    <p class="feature-description">Navigate the world with confidence. Subtle directional cues and contextual information overlay your vision, providing intuitive guidance without disrupting your natural field of view.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="feature-item-container">
                        <div class="feature-separator"></div>
                        <div class="feature-item" data-feature="Visual Focus">
                            <div class="feature-content-wrapper">
                                <span class="feature-text-part">Visual Focus</span>
                            </div>
                            <span class="feature-number-ar">03</span>
                        </div>
                        <!-- 확장될 영역 - 비디오 -->
                        <div class="expanded-content">
                            <div class="expanded-content-inner">
                                <video class="expanded-image" autoplay muted loop playsinline>
                                    <source src="3.mp4" type="video/mp4">
                                </video>
                                <div class="expanded-controls">
                                    <div class="arrow-container">
                                        <div class="arrow"></div>
                                    </div>
                                    <p class="feature-description">Prioritize what deserves attention. Advanced focus algorithms instantly sharpen objects of interest while softly blurring peripheral distractions, creating a crystal clear hierarchy of visual information that guides your eye naturally to what matters most in any environment.
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="feature-item-container">
                        <div class="feature-separator"></div>
                        <div class="feature-item" data-feature="Dynamic Magnification">
                            <div class="feature-content-wrapper">
                                <span class="feature-text-part">Dynamic Magnification</span>
                            </div>
                            <span class="feature-number-ar">04</span>
                        </div>
                        <!-- 확장될 영역 - 비디오 -->
                        <div class="expanded-content">
                            <div class="expanded-content-inner">
                                <video class="expanded-image" autoplay muted loop playsinline>
                                    <source src="4.mp4" type="video/mp4">
                                </video>
                                <div class="expanded-controls">
                                    <div class="arrow-container">
                                        <div class="arrow"></div>
                                    </div>
                                    <p class="feature-description">Bring distant details closer. Intelligent zoom technology automatically magnifies objects of interest while maintaining perfect clarity, allowing you to see fine details from any distance with natural eye movements.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="feature-item-container">
                        <div class="feature-separator"></div>
                        <div class="feature-item" data-feature="Health Monitoring">
                            <div class="feature-content-wrapper">
                                <span class="feature-text-part">Health Monitoring</span>
                            </div>
                            <span class="feature-number-ar">05</span>
                        </div>
                        <!-- 확장될 영역 - 비디오 -->
                        <div class="expanded-content">
                            <div class="expanded-content-inner">
                                <video class="expanded-image" autoplay muted loop playsinline>
                                    <source src="5.mp4" type="video/mp4">
                                </video>
                                <div class="expanded-controls">
                                    <div class="arrow-container">
                                        <div class="arrow"></div>
                                    </div>
                                    <p class="feature-description">Monitor your wellness discreetly. Continuous biometric tracking provides insights into stress levels, fatigue, and overall health without interrupting your daily activities.</p>
                                </div>
                            </div>
                        </div>
                        <div class="feature-separator"></div>
                    </div>
                </div>
            </section>
            
            <!-- Section 4: Privacy Policy -->
            <section class="section privacy-section" id="section4">
                <div class="privacy-container">
                    <div class="privacy-content">
                        <p>Your vision is sacred. REvision operates on a zero-trust architecture where all visual data is encrypted at the photon level. Processing happens locally on the lens itself, with no constant connection to external servers. You maintain complete control over what's recorded, what's remembered, and what's shared. Even we can't access your visual feed.</p>
                    </div>
                    
                    <div class="video-text-container">
                        <div class="video-container">
                            <video autoplay muted loop playsinline>
                                <source src="work.mp4" type="video/mp4">
                            </video>
                        </div>
                        <div class="text-container">
                            <p>Isolated development, compartmentalized security: your data never leaves your control.</p>
                        </div>
                    </div>
                    
                    <div class="privacy-footer">
                        <div class="re-footer">Re</div>
                        <div class="construct-footer">calibrate</div>
                    </div>
                </div>
            </section>
            
            <!-- Section 5: Contact - REDESIGNED -->
            <section class="section connect-section" id="section5">
                <div class="connect-text">
                    <div class="connect-text-inner">Contact</div>
                </div>
                
                <div class="contact-form-container">
                    <form class="contact-form">
                        <div class="form-group">
                            <label for="name">Name</label>
                            <input type="text" id="name" name="name" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="email">Email</label>
                            <input type="email" id="email" name="email" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="phone">Phone</label>
                            <input type="tel" id="phone" name="phone">
                        </div>
                        
                        <div class="form-group">
                            <label for="inquiry">Inquiry Type</label>
                            <select id="inquiry" name="inquiry">
                                <option value="">Select inquiry type</option>
                                <option value="general">General Inquiry</option>
                                <option value="product">Product Information</option>
                                <option value="partnership">Partnership</option>
                                <option value="support">Support</option>
                                <option value="media">Media</option>
                            </select>
                        </div>
                        
                        <div class="form-group full-width">
                            <label for="message">Message</label>
                            <textarea id="message" name="message" required></textarea>
                        </div>
                        
                        <div class="submit-container">
                            <button type="submit" class="submit-btn">Submit</button>
                        </div>
                    </form>
                </div>
            </section>
        </div>
    </div>
    
    <!-- Preload videos for hover effects -->
    <div style="display: none;">
        <video preload="metadata" muted>
            <source src="1.mp4" type="video/mp4">
        </video>
        <video preload="metadata" muted>
            <source src="2.mp4" type="video/mp4">
        </video>
        <video preload="metadata" muted>
            <source src="3.mp4" type="video/mp4">
        </video>
        <video preload="metadata" muted>
            <source src="4.mp4" type="video/mp4">
        </video>
        <video preload="metadata" muted>
            <source src="5.mp4" type="video/mp4">
        </video>
    </div>
    
    <!-- Load script as a module -->
    <script type="module">
        // Import THREE.js modules
        import * as THREE from 'three';
        import { OrbitControls } from 'three/addons/controls/OrbitControls.js';
        import { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';

        document.addEventListener('DOMContentLoaded', function() {
            // Initialize GSAP
            gsap.registerPlugin(ScrollTrigger, ScrollSmoother);
            
            // Eye model variables with deformation support
            let eyeScene, eyeCamera, eyeRenderer, eyeModel, eyeControls;
            let eyeContainer = document.getElementById('eye-model-container');
            let eyeMesh, originalVertices;
            let deformationStrength = 0;
            let deformationPoint = new THREE.Vector3();
            let isClicking = false;
            let rotationVelocity = 0;
            let previousRotationY = 0;
            let globalElasticStrength = 0;
            
            // Variables for feature expansion
            let expandedFeature = null;
            
            // Check if mobile
            const isMobile = window.innerWidth <= 768;
            
            // Play video
            const video = document.getElementById('intro-video');
            video.play().catch(e => console.log("Video autoplay prevented:", e));
            
            // Initialize ScrollSmoother
            const smoother = ScrollSmoother.create({
                wrapper: '#smooth-wrapper',
                content: '#smooth-content',
                smooth: 1.5,
                effects: true,
                normalizeScroll: true,
                ignoreMobileResize: true
            });
            
            // Navigation functionality - FIXED VERSION WITH CORRECT SECTION MAPPING
            const navLinks = document.querySelectorAll('.nav-links a');
            const navIndicator = document.querySelector('.nav-indicator');
            
            // Set nav indicator position with GSAP animation
            function setNavIndicator(activeLink) {
                const linkRect = activeLink.getBoundingClientRect();
                const navRect = activeLink.closest('.nav-container').getBoundingClientRect();
                
                gsap.to(navIndicator, {
                    duration: 0.3,
                    ease: "power2.out",
                    left: (linkRect.left - navRect.left) + 'px',
                    width: linkRect.width + 'px',
                    opacity: 1
                });
            }
            
            // Add click handlers to nav links - FIXED MAPPING
            navLinks.forEach((link, index) => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // Remove active class from all links
                    navLinks.forEach(l => l.classList.remove('active'));
                    // Add active class to clicked link
                    this.classList.add('active');
                    
                    // Update nav indicator
                    setNavIndicator(this);
                    
                    // CORRECTED: Map nav clicks to correct sections
                    let targetSection;
                    switch(index) {
                        case 0: targetSection = 'section2'; break; // Info -> Features section (section2)
                        case 1: targetSection = 'section3'; break; // Features -> AR Features (section3)
                        case 2: targetSection = 'section4'; break; // Privacy -> Privacy section (section4)
                        case 3: targetSection = 'section5'; break; // Contact -> Contact section (section5)
                    }
                    
                    const section = document.getElementById(targetSection);
                    if (section) {
                        smoother.scrollTo(section, true, "top top");
                    }
                });
            });
            
            // Update active nav link based on scroll position - CORRECTED SECTION DETECTION
            ScrollTrigger.create({
                trigger: "#section1",
                start: "top center",
                end: "bottom center",
                onEnter: () => {
                    // Hide indicator in intro
                    navLinks.forEach(link => link.classList.remove('active'));
                    gsap.to(navIndicator, { duration: 0.3, opacity: 0 });
                },
                onEnterBack: () => {
                    // Hide indicator in intro
                    navLinks.forEach(link => link.classList.remove('active'));
                    gsap.to(navIndicator, { duration: 0.3, opacity: 0 });
                }
            });

            ScrollTrigger.create({
                trigger: "#section2",
                start: "top center",
                end: "bottom center",
                onEnter: () => {
                    navLinks.forEach(link => link.classList.remove('active'));
                    navLinks[0].classList.add('active'); // Info (actually section2)
                    setNavIndicator(navLinks[0]);
                },
                onEnterBack: () => {
                    navLinks.forEach(link => link.classList.remove('active'));
                    navLinks[0].classList.add('active'); // Info (actually section2)
                    setNavIndicator(navLinks[0]);
                }
            });

            ScrollTrigger.create({
                trigger: "#section3",
                start: "top center",
                end: "bottom center",
                onEnter: () => {
                    navLinks.forEach(link => link.classList.remove('active'));
                    navLinks[1].classList.add('active'); // Features (actually section3)
                    setNavIndicator(navLinks[1]);
                },
                onEnterBack: () => {
                    navLinks.forEach(link => link.classList.remove('active'));
                    navLinks[1].classList.add('active'); // Features (actually section3)
                    setNavIndicator(navLinks[1]);
                }
            });

            ScrollTrigger.create({
                trigger: "#section4",
                start: "top center",
                end: "bottom center",
                onEnter: () => {
                    navLinks.forEach(link => link.classList.remove('active'));
                    navLinks[2].classList.add('active'); // Privacy
                    setNavIndicator(navLinks[2]);
                },
                onEnterBack: () => {
                    navLinks.forEach(link => link.classList.remove('active'));
                    navLinks[2].classList.add('active'); // Privacy
                    setNavIndicator(navLinks[2]);
                }
            });

            ScrollTrigger.create({
                trigger: "#section5",
                start: "top center",
                end: "bottom center",
                onEnter: () => {
                    navLinks.forEach(link => link.classList.remove('active'));
                    navLinks[3].classList.add('active'); // Contact
                    setNavIndicator(navLinks[3]);
                },
                onEnterBack: () => {
                    navLinks.forEach(link => link.classList.remove('active'));
                    navLinks[3].classList.add('active'); // Contact
                    setNavIndicator(navLinks[3]);
                }
            });
            
            // Folding effect for hero section
            gsap.to(".hero-section", {
                scrollTrigger: {
                    trigger: ".hero-section",
                    start: "top top",
                    end: "bottom top",
                    scrub: true
                },
                scaleY: 0,
                transformOrigin: "top",
                ease: "power3.inOut"
            });
            
            // Update progress bar
            window.addEventListener('scroll', function() {
                const scrollTop = window.pageYOffset;
                const docHeight = document.body.offsetHeight - window.innerHeight;
                const scrollProgress = scrollTop / docHeight;
                document.querySelector('.progress').style.width = scrollProgress * 100 + '%';
            });
            
            // Get all feature containers and dynamic title
            const features = [
                document.getElementById('feature1'),
                document.getElementById('feature2'),
                document.getElementById('feature3')
            ];
            
            const dynamicTitle = document.getElementById('dynamic-title');
            const featureTitles = ['REimagine', 'REinvent', 'REvision'];
            
            // Set initial state
            gsap.set(features[0], { autoAlpha: 1 });
            gsap.set(features[1], { autoAlpha: 0 });
            gsap.set(features[2], { autoAlpha: 0 });
            
            // Create a fixed position for the features section with hard pin
            ScrollTrigger.create({
                trigger: ".features-section",
                start: "top top",
                end: "+=200%",
                pin: true,
                pinSpacing: true,
                anticipatePin: 1
            });
            
            // Variables to track scroll position
            let currentScrollProgress = 0;
            
            // Create the timeline for feature transitions
            ScrollTrigger.create({
                trigger: ".features-section",
                start: "top top",
                end: "+=200%",
                scrub: 0.1,
                onUpdate: function(self) {
                    // Crossfade between features based on scroll position with instant transitions
                    if (self.progress < 0.33) {
                        // Feature 1 visible - instantly show and hide with no transition
                        features[0].style.opacity = 1;
                        features[0].style.visibility = 'visible';
                        features[1].style.opacity = 0;
                        features[1].style.visibility = 'hidden';
                        features[2].style.opacity = 0;
                        features[2].style.visibility = 'hidden';
                        dynamicTitle.textContent = featureTitles[0];
                        window.currentFeature = 1;
                    } else if (self.progress < 0.67) {
                        // Feature 2 visible - instantly show and hide with no transition
                        features[0].style.opacity = 0;
                        features[0].style.visibility = 'hidden';
                        features[1].style.opacity = 1;
                        features[1].style.visibility = 'visible';
                        features[2].style.opacity = 0;
                        features[2].style.visibility = 'hidden';
                        dynamicTitle.textContent = featureTitles[1];
                        window.currentFeature = 2;
                    } else {
                        // Feature 3 visible - instantly show and hide with no transition
                        features[0].style.opacity = 0;
                        features[0].style.visibility = 'hidden';
                        features[1].style.opacity = 0;
                        features[1].style.visibility = 'hidden';
                        features[2].style.opacity = 1;
                        features[2].style.visibility = 'visible';
                        dynamicTitle.textContent = featureTitles[2];
                        window.currentFeature = 3;
                    }
                    
                    // Update the scroll progress value for 3D model rotation
                    currentScrollProgress = (self.progress - 0.5) * 2; // Range from -1 to 1
                    
                    // Update eye model rotation if it exists
                    if (eyeModel) {
                        updateEyeRotation();
                    }
                }
            });
            
            // Contact text reveal animation - Smooth and gradual
            ScrollTrigger.create({
                trigger: ".connect-section",
                start: "top 90%",
                end: "top 10%",
                scrub: 0.5,
                animation: gsap.fromTo(".connect-text-inner", 
                    {
                        y: "100%"
                    },
                    {
                        y: "0%",
                        ease: "power1.out"
                    }
                )
            });
            
            // UPDATED AR FEATURES SECTION FUNCTIONALITY - All Videos
            const featureItems = document.querySelectorAll('.feature-item');
            const arFeaturesSection = document.querySelector('.ar-features-section');
            
            // All media as videos now
            const mediaData = [
                { feature: 'Name Recall', src: '1.mp4', type: 'video' },
                { feature: 'Augmented Navigation', src: '2.mp4', type: 'video' },
                { feature: 'Visual Focus', src: '3.mp4', type: 'video' },
                { feature: 'Dynamic Magnification', src: '4.mp4', type: 'video' },
                { feature: 'Health Monitoring', src: '5.mp4', type: 'video' }
            ];
            
            // 호버 미디어들을 모두 비디오로 생성 (모바일에서는 생성하지 않음)
            const hoverMedia = {};
            if (!isMobile) {
                mediaData.forEach(data => {
                    const video = document.createElement('video');
                    video.src = data.src;
                    video.alt = data.feature;
                    video.className = 'dynamic-hover-media';
                    video.autoplay = true;
                    video.muted = true;
                    video.loop = true;
                    video.playsInline = true;
                    video.style.cssText = `
                        position: fixed;
                        right: 150px;
                        width: 450px;
                        height: 300px;
                        object-fit: cover;
                        opacity: 0;
                        transition: opacity 0.3s ease;
                        pointer-events: none;
                        z-index: 1000;
                        display: block;
                    `;
                    document.body.appendChild(video);
                    hoverMedia[data.feature] = video;
                });
            }
            
            // Function to hide all hover media - 모두 비디오이므로 단순화
            function hideAllHoverMedia() {
                if (!isMobile) {
                    Object.values(hoverMedia).forEach(video => {
                        video.style.opacity = '0';
                        video.pause();
                    });
                }
            }
            
            // Function to expand a feature
            function expandFeature(clickedItem) {
                const container = clickedItem.closest('.feature-item-container');
                
                // 클릭하는 순간 모든 호버 미디어 숨기기
                hideAllHoverMedia();
                
                // If clicking the same feature, collapse it
                if (expandedFeature === container) {
                    collapseAllFeatures();
                    return;
                }
                
                // Collapse any previously expanded feature
                collapseAllFeatures();
                
                // Set the new expanded feature
                expandedFeature = container;
                container.classList.add('expanded');
                
                // Add expanded class to section for height adjustment (데스크톱에서만)
                if (!isMobile) {
                    arFeaturesSection.classList.add('has-expanded');
                }
            }
            
            // Function to collapse all features
            function collapseAllFeatures() {
                if (expandedFeature) {
                    expandedFeature.classList.remove('expanded');
                    expandedFeature = null;
                }
                // Remove expanded class from section (데스크톱에서만)
                if (!isMobile) {
                    arFeaturesSection.classList.remove('has-expanded');
                }
                // 접을 때도 호버 미디어 숨기기
                hideAllHoverMedia();
            }
            
            // Add event listeners to feature items
            featureItems.forEach((item) => {
                // Click event for expansion
                item.addEventListener('click', function(e) {
                    e.preventDefault();
                    expandFeature(this);
                });
                
                // Hover events for media (기존 섹션에서만, 확장되지 않았을 때만, 데스크톱에서만)
                if (!isMobile) {
                    item.addEventListener('mouseenter', function() {
                        const container = this.closest('.feature-item-container');
                        
                        // 섹션 안에 있고, 확장되지 않았을 때만 호버 미디어 표시
                        if (arFeaturesSection.contains(this) && !container.classList.contains('expanded') && !expandedFeature) {
                            // 먼저 모든 호버 미디어 숨기기
                            hideAllHoverMedia();
                            
                            const featureName = this.getAttribute('data-feature');
                            const correspondingMedia = hoverMedia[featureName];
                            
                            if (correspondingMedia) {
                                // 현재 텍스트의 위치를 가져와서 미디어를 수평 정렬
                                const textRect = this.getBoundingClientRect();
                                const textCenterY = textRect.top + (textRect.height / 2);
                                
                                correspondingMedia.style.top = textCenterY + 'px';
                                correspondingMedia.style.transform = 'translateY(-50%)';
                                correspondingMedia.style.opacity = '1';
                                
                                // 모두 비디오이므로 조건문 제거
                                correspondingMedia.play().catch(e => console.log("Video play prevented:", e));
                            }
                            
                            // 텍스트 이탤릭
                            const textParts = this.querySelectorAll('.feature-text-part');
                            textParts.forEach(textPart => {
                                textPart.style.fontStyle = 'italic';
                            });
                        }
                    });
                    
                    item.addEventListener('mouseleave', function() {
                        const container = this.closest('.feature-item-container');
                        
                        // 섹션 안에 있고, 확장되지 않았을 때만
                        if (arFeaturesSection.contains(this) && !container.classList.contains('expanded')) {
                            const featureName = this.getAttribute('data-feature');
                            const correspondingMedia = hoverMedia[featureName];
                            
                            if (correspondingMedia) {
                                correspondingMedia.style.opacity = '0';
                                // 모두 비디오이므로 조건문 제거
                                correspondingMedia.pause();
                            }
                            
                            // 텍스트 스타일 리셋
                            const textParts = this.querySelectorAll('.feature-text-part');
                            textParts.forEach(textPart => {
                                textPart.style.fontStyle = 'normal';
                            });
                        }
                    });
                }
            });
            
            // Close expanded feature when clicking outside
            document.addEventListener('click', function(e) {
                // AR features 섹션 밖을 클릭했을 때만 접기
                if (expandedFeature && !arFeaturesSection.contains(e.target)) {
                    collapseAllFeatures();
                }
            });
            
            // Close expanded feature when scrolling away from the section (데스크톱에서만)
            if (!isMobile) {
                ScrollTrigger.create({
                    trigger: ".ar-features-section",
                    start: "top bottom",
                    end: "bottom top",
                    onLeave: () => {
                        if (expandedFeature) {
                            collapseAllFeatures();
                        }
                        // 섹션을 벗어날 때 모든 호버 미디어 숨기기
                        hideAllHoverMedia();
                    },
                    onEnterBack: () => {
                        // 섹션에 다시 들어올 때도 모든 호버 미디어 숨기기
                        hideAllHoverMedia();
                    }
                });
                
                // 다른 섹션으로 스크롤할 때 호버 미디어 숨기기
                ScrollTrigger.create({
                    trigger: "#section1",
                    start: "top center",
                    end: "bottom center",
                    onEnter: () => hideAllHoverMedia(),
                    onEnterBack: () => hideAllHoverMedia()
                });
                
                ScrollTrigger.create({
                    trigger: "#section2",
                    start: "top center", 
                    end: "bottom center",
                    onEnter: () => hideAllHoverMedia(),
                    onEnterBack: () => hideAllHoverMedia()
                });
                
                ScrollTrigger.create({
                    trigger: "#section4",
                    start: "top center",
                    end: "bottom center", 
                    onEnter: () => hideAllHoverMedia(),
                    onEnterBack: () => hideAllHoverMedia()
                });
                
                ScrollTrigger.create({
                    trigger: "#section5",
                    start: "top center",
                    end: "bottom center",
                    onEnter: () => hideAllHoverMedia(),
                    onEnterBack: () => hideAllHoverMedia()
                });
            }
            
            // Function to perform lens deformation - BALANCED SUBTLETY
            function deformLens() {
                if (!eyeMesh || !originalVertices || isMobile) return;
                
                const positions = eyeMesh.geometry.attributes.position.array;
                const time = Date.now() * 0.001;
                
                // Calculate rotation velocity for elastic response
                const currentRotationY = eyeModel.rotation.y;
                rotationVelocity = (currentRotationY - previousRotationY) * 40; // Balanced sensitivity
                previousRotationY = currentRotationY;
                
                // Update global elastic strength based on movement
                const targetElasticStrength = Math.abs(rotationVelocity) * 2.0; // Moderate effect
                globalElasticStrength += (targetElasticStrength - globalElasticStrength) * 0.1;
                
                // Reset to original positions
                for (let i = 0; i < positions.length; i++) {
                    positions[i] = originalVertices[i];
                }
                
                // Apply balanced elastic deformation to entire surface
                for (let i = 0; i < positions.length; i += 3) {
                    const vertex = new THREE.Vector3(positions[i], positions[i + 1], positions[i + 2]);
                    const originalVertex = vertex.clone();
                    
                    // Balanced surface wave when rotating
                    if (globalElasticStrength > 0.008) {
                        const distance = vertex.length();
                        const wavePhase = distance * 7 + time * 3; // Moderate speed
                        const waveDeform = Math.sin(wavePhase) * globalElasticStrength * 0.025; // Noticeable but not excessive
                        const direction = vertex.clone().normalize();
                        vertex.addScaledVector(direction, waveDeform);
                    }
                    
                    // Gentle but visible wobble during rotation
                    if (Math.abs(rotationVelocity) > 0.004) {
                        const wobblePhase = originalVertex.x * 2.5 + originalVertex.y * 1.8 + time * 4;
                        const wobbleAmount = Math.sin(wobblePhase) * Math.abs(rotationVelocity) * 0.015; // Visible but refined
                        vertex.addScaledVector(vertex.clone().normalize(), wobbleAmount);
                    }
                    
                    // Noticeable but refined touch deformation
                    if (deformationStrength > 0.008) {
                        const deformRadius = 0.5; // Moderate radius
                        const maxDeformation = isClicking ? 0.1 : 0.055; // Clear but not extreme
                        const touchDistance = vertex.distanceTo(deformationPoint);
                        
                        if (touchDistance < deformRadius) {
                            const falloff = Math.cos((touchDistance / deformRadius) * Math.PI * 0.5);
                            const deformAmount = maxDeformation * deformationStrength * falloff * falloff;
                            const direction = vertex.clone().normalize();
                            vertex.addScaledVector(direction, -deformAmount);
                        }
                    }
                    
                    positions[i] = vertex.x;
                    positions[i + 1] = vertex.y;
                    positions[i + 2] = vertex.z;
                }
                
                eyeMesh.geometry.attributes.position.needsUpdate = true;
                eyeMesh.geometry.computeVertexNormals();
            }
            
            // Function to animate deformation strength
            function animateDeformation(targetStrength, duration = 0.3) {
                if (isMobile) return;
                
                gsap.to({ strength: deformationStrength }, {
                    strength: targetStrength,
                    duration: duration,
                    ease: "power2.out",
                    onUpdate: function() {
                        deformationStrength = this.targets()[0].strength;
                    }
                });
            }
            
            // Initialize THREE.js scene with eye.glb model
            function initEyeModel() {
                // Create the scene
                eyeScene = new THREE.Scene();
                eyeScene.background = new THREE.Color(0x000000); // Set scene background to black
                
                // Create camera
                eyeCamera = new THREE.PerspectiveCamera(45, eyeContainer.clientWidth / eyeContainer.clientHeight, 0.1, 1000);
                eyeCamera.position.set(0, 0, 5);
                
                // Create renderer with black background
                eyeRenderer = new THREE.WebGLRenderer({ antialias: true });
                eyeRenderer.setSize(eyeContainer.clientWidth, eyeContainer.clientHeight);
                eyeRenderer.setClearColor(0x000000, 1); // Black background with full opacity
                eyeRenderer.setPixelRatio(window.devicePixelRatio);
                eyeContainer.appendChild(eyeRenderer.domElement);
                
                // Add lights with slightly reduced intensity
                // Ambient light for general illumination
                const ambientLight = new THREE.AmbientLight(0xffffff, 1.2);
                eyeScene.add(ambientLight);
                
                // Main directional light 
                const directionalLight = new THREE.DirectionalLight(0xffffff, 2.2);
                directionalLight.position.set(4, 2, 3);
                eyeScene.add(directionalLight);
                
                // Secondary light 
                const secondaryLight = new THREE.DirectionalLight(0xffffff, 1.5);
                secondaryLight.position.set(-2, 1, 3);
                eyeScene.add(secondaryLight);
                
                // Fill light 
                const fillLight = new THREE.DirectionalLight(0xffffff, 1.3);
                fillLight.position.set(0, -2, 2);
                eyeScene.add(fillLight);
                
                // Point light for detail visibility
                const pointLight = new THREE.PointLight(0xffffff, 1.0);
                pointLight.position.set(0, 0, 2);
                eyeScene.add(pointLight);
                
                // Load the GLB model using GLTFLoader with deformation support
                const loader = new GLTFLoader();
                loader.load(
                    'eye.glb', 
                    function(gltf) {
                        eyeModel = gltf.scene;
                        
                        // Find the eye mesh and store original vertices - preserve original materials
                        eyeModel.traverse((child) => {
                            if (child.isMesh) {
                                eyeMesh = child;
                                
                                // Preserve original material - don't modify it
                                console.log("Original material:", child.material);
                                
                                // Store original vertices for deformation
                                const positions = child.geometry.attributes.position.array;
                                originalVertices = new Float32Array(positions.length);
                                for (let i = 0; i < positions.length; i++) {
                                    originalVertices[i] = positions[i];
                                }
                                
                                // Make geometry dynamic for deformation
                                child.geometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
                                child.geometry.attributes.position.setUsage(THREE.DynamicDrawUsage);
                            }
                        });
                        
                        // Scale reduced by 10% for smaller 3D object
                        eyeModel.scale.set(1.8, 1.8, 1.8);
                        
                        // Center the model
                        eyeModel.position.set(0.5, 0, 0);
                        
                        eyeScene.add(eyeModel);
                        
                        // Initialize rotation to match scroll position
                        updateEyeRotation();
                        
                        // Start animation loop
                        animate();
                        console.log("GLB model loaded successfully");
                    },
                    function(xhr) {
                        console.log((xhr.loaded / xhr.total) * 100 + '% loaded');
                    },
                    function(error) {
                        console.error('An error happened while loading the model:', error);
                    }
                );
                
                // Add OrbitControls with limited rotation
                eyeControls = new OrbitControls(eyeCamera, eyeRenderer.domElement);
                eyeControls.enableZoom = false; // Disable zooming
                eyeControls.enablePan = false; // Disable panning
                
                if (!isMobile) {
                    eyeControls.minPolarAngle = Math.PI / 2 - 0.4; // Limit vertical rotation
                    eyeControls.maxPolarAngle = Math.PI / 2 + 0.4;
                    eyeControls.minAzimuthAngle = -Math.PI / 4; // Limit horizontal rotation
                    eyeControls.maxAzimuthAngle = Math.PI / 4;
                    eyeControls.rotateSpeed = 0.5; // Slower rotation speed
                } else {
                    // More relaxed controls for mobile
                    eyeControls.rotateSpeed = 0.3;
                }
                
                // Handle window resize
                window.addEventListener('resize', onWindowResize);
            }
            
            // Update eye model rotation based on scroll position when not being dragged
            function updateEyeRotation() {
                if (!eyeModel || eyeControls.enabled === false) return;
                
                // Only update rotation if not currently being controlled by user
                if (!eyeControls.active) {
                    // Apply smooth rotation based on scroll position
                    const targetRotationY = currentScrollProgress * Math.PI / 6; // Max 30 degrees
                    
                    // Add subtle automatic rotation in both axes
                    const time = Date.now() * 0.0008; // Slower speed
                    const autoRotationY = Math.sin(time) * 0.15; // Smaller horizontal oscillation (±8.6 degrees)
                    const autoRotationX = Math.cos(time * 0.7) * 0.1; // Smaller vertical oscillation (±5.7 degrees)
                    
                    // Combine scroll-based rotation with automatic rotation
                    const finalRotationY = targetRotationY + autoRotationY;
                    const finalRotationX = autoRotationX;
                    
                    // Apply smooth transition to the target rotations
                    eyeModel.rotation.y += (finalRotationY - eyeModel.rotation.y) * 0.1;
                    eyeModel.rotation.x += (finalRotationX - eyeModel.rotation.x) * 0.1;
                }
                
                // Apply lens deformation (데스크톱에서만)
                if (!isMobile) {
                    deformLens();
                }
            }
            
            // Handle window resize
            function onWindowResize() {
                if (!eyeCamera || !eyeRenderer || !eyeContainer) return;
                
                eyeCamera.aspect = eyeContainer.clientWidth / eyeContainer.clientHeight;
                eyeCamera.updateProjectionMatrix();
                eyeRenderer.setSize(eyeContainer.clientWidth, eyeContainer.clientHeight);
            }
            
            // Animation loop
            function animate() {
                requestAnimationFrame(animate);
                
                // Update controls
                eyeControls.update();
                
                // Update rotation if not being controlled
                if (!eyeControls.active) {
                    updateEyeRotation();
                }
                
                // Render scene
                eyeRenderer.render(eyeScene, eyeCamera);
            }
            
            // Initialize eye model after the page has loaded
            window.addEventListener('load', function() {
                console.log("Initializing eye model...");
                initEyeModel();
                
                // Force refresh scrolltrigger
                setTimeout(() => {
                    ScrollTrigger.refresh();
                }, 200);
            });
            
            // Add custom behavior to OrbitControls with deformation effects (데스크톱에서만)
            if (!isMobile) {
                eyeContainer.addEventListener('mousedown', function(e) {
                    if (eyeControls) {
                        eyeControls.active = true;
                        isClicking = true;
                        
                        // Calculate deformation point based on mouse position
                        const rect = eyeContainer.getBoundingClientRect();
                        const mouseX = ((e.clientX - rect.left) / rect.width) * 2 - 1;
                        const mouseY = -((e.clientY - rect.top) / rect.height) * 2 + 1;
                        
                        // Project mouse position to 3D space
                        const vector = new THREE.Vector3(mouseX, mouseY, 0.5);
                        vector.unproject(eyeCamera);
                        const dir = vector.sub(eyeCamera.position).normalize();
                        const distance = -eyeCamera.position.z / dir.z;
                        deformationPoint = eyeCamera.position.clone().add(dir.multiplyScalar(distance));
                        
                        // Start deformation animation
                        animateDeformation(1.0, 0.2);
                    }
                });
                
                eyeContainer.addEventListener('mouseup', function() {
                    if (eyeControls) {
                        eyeControls.active = false;
                        isClicking = false;
                        
                        // End deformation animation
                        animateDeformation(0.0, 0.4);
                    }
                });
                
                window.addEventListener('mouseup', function() {
                    if (eyeControls) {
                        eyeControls.active = false;
                        isClicking = false;
                        
                        // End deformation animation
                        animateDeformation(0.0, 0.4);
                    }
                });
            }
        });
    </script>
</body>
</html>
